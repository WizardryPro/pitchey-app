name: Simple Health Check

on:
  workflow_dispatch:
  schedule:
    - cron: '*/30 * * * *'  # Every 30 minutes

jobs:
  health-check:
    runs-on: blacksmith-4vcpu-ubuntu-2404
    steps:
      - name: Check Frontend
        run: |
          if curl -f https://pitchey-5o8.pages.dev/ > /dev/null 2>&1; then
            echo "✅ Frontend is healthy"
          else
            echo "❌ Frontend is down"
            exit 1
          fi
          
      - name: Check API
        run: |
          if curl -f https://pitchey-api-prod.ndlovucavelle.workers.dev/api/health > /dev/null 2>&1; then
            echo "✅ API is healthy"
          else
            echo "❌ API is down"
            exit 1
          fi
